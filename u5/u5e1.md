# Tema 3. JavaScript profesional en una aplicaci√≥n web

## Unidad 5. API Disponibles en el navegador

## Ejercicio 3.5.1. (Castellano)

En este ejercicio vamos a practicar el trabajo con una API del navegador, concretamente con la API para la gesti√≥n del `Clipboard`.

Sobre esta API puedes [encontrar documentaci√≥n en MDN](https://developer.mozilla.org/en-US/docs/Web/API/Clipboard_API), y concretamente nos vamos a centrar en este ejercicio solamente en la clase [Clipboard](https://developer.mozilla.org/en-US/docs/Web/API/Clipboard) para la gesti√≥n de texto en el portapapeles mediante sus m√©todos `readText` y `writeText`.

A partir de esto tienes que:


### A. Clase `ClipboardApi`

Crea una clase `ClipboardApi` que dispondr√° de las siguientes propiedades y m√©todos:

- `clipboard`: propiedad de la clase que guardar√° referencia al objeto clipboard con el que trabajar.

- `copy`: m√©todo que copiar√° el texto indicado en el portapapeles.

- `read`: m√©todo que leer√° el texto disponible en el portapapeles.


### B. M√©todo `constructor`

El constructor de esta clase puede recibir un par√°metro `clipboard` (opcional), de manera que:

- Si recibe el par√°metro, se le asigna a la propiedad `clipboard` de la clase.

- Si no recibe el par√°metro, se le asigna a la propiedad `clipboard` de la clase la referencia a `window.navigator.clipboard`

> **üî• IMPORTANTE.** Como ya hemos comentado, debido a la problem√°tica del *testing* en JEST de algunas funcionalidades del navegador (como pueden ser sus APIS y el uso de cookies), se ha requerido esta caracter√≠stica, de manera que desde los tests se le pueda pasar a la clase la referencia al `mock` para la gesti√≥n de cookies que se ha creado y en caso de ejecutarse en un navegador real, no pasarle nada y que como *fallback* coja el objeto real `window.navigator.clipboard`.


### C. M√©todo `copy`

Este m√©todo ha de ser as√≠ncrono. Recibe un √∫nico par√°metro `text` que es el texto a copiar en el portapapeles.

Ha de devolver el resultado de la operaci√≥n de escritura en el portapapeles a trav√©s de la API de `clipboard`.

El m√©todo NO devuelve una promesa, sino que espera por el resultado de la escritura en el portapapeles y devuelve esa respuesta.


### D. M√©todo `read`

Este m√©todo ha de ser as√≠ncrono y devolver el resultado de la operaci√≥n de lectura del portapapeles a trav√©s de la API de `clipboard`.

El m√©todo NO devuelve una promesa, sino que espera por el resultado de la lectura de texto del portapapeles y devuelve esa respuesta.


### E. Exportar la clase

Para terminar, vamos a exportar la clase `ClipboardApi` para que pueda ser empleada en otros m√≥dulos.


-----


# Tema 3. JavaScript professional en una aplicaci√≥ web

## Unitat 5. API Disponibles al navegador

## Exercici 3.5.1. (Catal√†)

En aquest exercici practicarem el treball amb una API del navegador, concretament amb l'API per a la gesti√≥ del `Clipboard`.

Sobre aquesta API pots [trobar documentaci√≥ a MDN](https://developer.mozilla.org/en-US/docs/Web/API/Clipboard_API), i concretament ens centrarem en aquest exercici nom√©s a la classe [Clipboard] (https://developer.mozilla.org/en-US/docs/Web/API/Clipboard) per a la gesti√≥ de text al porta-retalls mitjan√ßant els seus m√®todes `readText` i `writeText`.

A partir d'aix√≤ has de:


### A. Classe `ClipboardApi`

Crea una classe `ClipboardApi` que disposar√† de les seg√ºents propietats i m√®todes:

- `clipboard`: propietat de la classe que guardar√† refer√®ncia a l'objecte clipboard amb qu√® treballar.

- `copy`: m√®tode que copiar√† el text indicat al porta-retalls.

- `read`: m√®tode que llegir√† el text disponible al porta-retalls.


### B. M√®tode `constructor`

El constructor d'aquesta classe pot rebre un par√†metre clipboard (opcional), de manera que:

- Si rebeu el par√†metre, se us assigna a la propietat `clipboard` de la classe.

- Si no rebeu el par√†metre, se us assigna a la propietat `clipboard` de la classe la refer√®ncia a `window.navigator.clipboard`

> **üî• IMPORTANT.** Com ja hem comentat, a causa de la problem√†tica del *testing* a JEST d'algunes funcionalitats del navegador (com poden ser les seves APIS i l'√∫s de cookies), s'ha requerit aquesta caracter√≠stica, de manera que des dels tests se li pugui passar a la classe la refer√®ncia al `mock` per a la gesti√≥ de cookies que s'ha creat i en cas d'executar-se en un navegador real, no passar-li res i que com a *fallback* agafi l'objecte real `window .navigator.clipboard`.


### C. M√®tode `copy`

Aquest m√®tode ha de ser as√≠ncron. Rep un √∫nic par√†metre `text` que √©s el text a copiar al porta-retalls.

Heu de tornar el resultat de l'operaci√≥ d'escriptura al porta-retalls a trav√©s de l'API de `clipboard`.

El m√®tode NO torna una promesa, sin√≥ que espera pel resultat de l'escriptura al porta-retalls i torna aquesta resposta.


### D. M√®tode `read`

Aquest m√®tode ha de ser as√≠ncron i tornar el resultat de l'operaci√≥ de lectura del porta-retalls a trav√©s de l'API de `clipboard`.

El m√®tode NO torna una promesa, sin√≥ que espera pel resultat de la lectura de text del porta-retalls i torna aquesta resposta.


### E. Exportar la classe

Per acabar, exportarem la classe `ClipboardApi` perqu√® pugui ser emprada en altres m√≤duls.
